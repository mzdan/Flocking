<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Flocking Playground</title>
        <link rel="stylesheet" type="text/css" href="../../shared/css/demos.css" />
        <link rel="stylesheet" type="text/css" href="../css/playground.css" />
    
        <script src="../../../third-party/jquery/js/jquery-2.0.0.js"></script>
        <script src="../../../third-party/infusion/js/Fluid.js"></script>
        <script src="../../../third-party/infusion/js/FluidIoC.js"></script>
        <script src="../../../third-party/infusion/js/DataBinding.js"></script>
        <script src="../../../third-party/dspapi/js/dspapi.js"></script>
        <script src="../../../third-party/polydataview/js/polydataview.js"></script>
        
        <script src="../../../flocking/flocking-core.js"></script>
        <script src="../../../flocking/flocking-audiofile.js"></script>
        <script src="../../../flocking/flocking-scheduler.js"></script>
        <script src="../../../flocking/flocking-firefox.js"></script>
        <script src="../../../flocking/flocking-webaudio.js"></script>
        <script src="../../../flocking/flocking-parser.js"></script>
        <script src="../../../flocking/flocking-ugens.js"></script>
        <script src="../../../flocking/flocking-ugens-browser.js"></script>
        <script src="../../../flocking/flocking-gfx.js"></script>
        
        <script src="../lib/ace_0.2.0/ace.js" charset="utf-8"></script>
        <script src="../lib/ace_0.2.0/theme-twilight.js" charset="utf-8"></script>
        <script src="../lib/ace_0.2.0/mode-javascript.js" charset="utf-8"></script>
        
        <script src="../js/playground.js"></script>
        

    </head>
    
    <body>
        <h1>Flocking Playground</h1>

        
        <!-- Scope View area for visualizing the demos -->
        <div id="scopeArea">
            <button class="playButton paused">Play</button>
            <div id="gfxContainer">
                <div>Waveform</div>
                <canvas id="gfx" height="50" width="640"></canvas>
            </div>
        </div>
        
        <!-- Controls for selecting a demo and playing/pausing the active synth. -->
        <div id="navi">
            <label for="sample_code_sel">Choose a demo:</label>
            <select id="sample_code_sel" size="1">
                <optgroup label="Simple Waveforms">
                    <option value="simple_sin">Sine</option>
                    <option value="simple_triangle">Triangle</option>
                    <option value="simple_square">Square</option>
                    <option value="simple_saw">Saw</option>
                    <option value="stereo">Stereo</option>
                </optgroup>
                <optgroup label="Noise">
                    <option value="noise_white">White noise</option>
                    <option value="noise_pink">Pink noise</option>
                    <option value="noise_dust">Dust</option>
                    <option value="noise_lf">LFNoise</option>
                    <option value="noise_sin">LFNoise &amp; SinOsc</option>
                    <option value="noise_impulse">Impulse</option>
                    <option value="impulse_phase">Impulse Phase Modulation</option>
                </optgroup>
                <optgroup label="Synthesis Techniques">
                    <option value="amp_mod" selected="selected">Amplitude modulation</option>
                    <option value="freq_mod">Frequency modulation</option>
                    <option value="phase_mod">Phase modulation</option>
                    <option value="sum">Additive Synthesis</option>
                </optgroup>
                <optgroup label="Granular Synthesis">
                    <option value="granulator">Granulator</option>
                </optgroup>
                <optgroup label="Filters">
                    <option value="lowpass">Low pass filter</option>
                    <option value="highpass">High pass filter</option>
                    <option value="bandpass">Band pass filter</option>
                    <option value="bandreject">Band reject filter</option>
                    <option value="delay">Delay</option>
                    <option value="latch">Sample and Hold</option>
                </optgroup>
                <optgroup label="Envelopes">
                    <option value="simpleASR">Simple Attack/Sustain/Release</option>
                    <option value="decay">Decay</option>
                    <option value="line_freq">SinOsc Freq</option>
                    <option value="line_mod">Mod SinOsc Freq</option>
                    <option value="line_phase">SinOsc Phase</option>
                </optgroup>
                <optgroup label="DOM UGens">
                    <option value="scope">Scope</option>
                    <option value="mouse_x">Mouse X</option>
                    <option value="mouse_y">Mouse Y</option>
                    <option value="mouse_xy">Mouse X &amp; Y</option>
                    <option value="mouse_click">Mouse click</option>
                </optgroup>
                <optgroup label="Synths and Scheduling">
                    <option value="multipleSynths">Multiple Synths</option>
                    <option value="polyphonicSynth">Polyphonic Synth</option>
                    <option value="declarativeScheduling">Declarative Scheduling</option>
                </optgroup>
            </select>
            <button id="load-button">Load</button>
        </div>

        <!-- Placeholder for the Ace interactive editor -->
        <div class="editorPanel">
            <pre id="editor">

            </pre>
        </div>

        <script>
            var editorView = demo.liveEditorView("editor");
        </script>
        
        <!-- start of sample codes -->
        <script type="application/flocking" id="amp_mod">
// Create a new synth consisting of a sine wave, 
// modulating its amplitude slowly with another sine wave.
var synth = flock.synth({
    synthDef: {
        id: "carrier",
        ugen: "flock.ugen.sinOsc",
        freq: 440,
        mul: {
            id: "mod",
            ugen: "flock.ugen.sinOsc",
            freq: 1.0,
            mul: 0.25
        }
    }
});
        </script>

        <script type="application/flocking" id="freq_mod">
//Frequency Modulation (FM) Synthesis Demo
var synth = flock.synth({
    synthDef: {
        id: "carrier",
        ugen: "flock.ugen.sinOsc",
        freq: 440,
        add: {
            id: "mod",
            ugen: "flock.ugen.sinOsc",
            freq: 220
        },
        mul: 0.25
    }
});
        </script>

        <script type="application/flocking" id="line_freq">
// An ascending sinOsc glissando using a line ugen.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: {
            ugen: "flock.ugen.xLine",
            rate: "control",
            duration: 1.0,
            start: 2000,
            end: 200
        },
        mul: 0.25
    }
});
        </script>

        <script type="application/flocking" id="line_mod">
//Line w/ Modulated SinOsc Freq
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: {
            ugen: "flock.ugen.sinOsc",
            freq: {
                ugen: "flock.ugen.xLine",
                rate: "control",
                start: 1,
                end: 1000,
                duration: 9
            },
            mul: 200,
            add: 800
        },
        mul: 0.25
    }
});
        </script>

        <script type="application/flocking" id="line_phase">
// Line modulating the phase of a sine oscillator.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: 800,
        phase: {
            ugen: "flock.ugen.sinOsc",
            freq: {
                ugen: "flock.ugen.xLine",
                rate: "control",
                start: 1,
                end: 1000,
                duration: 9
            },
            mul: flock.TWOPI
        },
        mul: 0.25
    }
});
        </script>

        <script type="application/flocking" id="simpleASR">
// Sine tone shaped by a simple attack/sustain/release envelope and randomly triggered.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: 440,
        mul: {
            ugen: "flock.ugen.env.simpleASR",
            start: 0.0,
            attack: 0.25,
            sustain: 0.25,
            release: 1.0,
            gate: {
                ugen: "flock.ugen.impulse",
                rate: "control",
                freq: 0.75,
                phase: 1.0
            }
        }
    }
});
        </script>
        
        <script type="application/flocking" id="decay">
// Decay as an envelope for white noise.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.decay",
        source: {
            ugen: "flock.ugen.impulse",
            rate: "audio",
            freq: {
                ugen: "flock.ugen.xLine",
                rate: "control",
                start: 1,
                end: 50,
                duration: 20
            },
            phase: 0.25,
            mul: 0.25
        },
        time: 0.2,
        mul: {
            ugen: "flock.ugen.whiteNoise"
        }
    }
});
        </script>
        
        <script type="application/flocking" id="noise_white">
// Filtering white noise with the mouse.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.filter.biquad.bp",
        source: {
            ugen: "flock.ugen.whiteNoise",
            mul: 0.5
        },
        freq: {
            ugen: "flock.ugen.mouse.cursor",
            mul: 1660,
            add: 40,
            options: {
                interoplation: "exponential"
            }
        },
        q: 2.0
    }
});
        </script>
        
        <script type="application/flocking" id="noise_pink">
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.pinkNoise",
        mul: 0.5
    }
});
        </script>
        
        <script type="application/flocking" id="noise_dust">
// Simple example of Dust generating random audio noise.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.dust",
        density: 200,
        mul: 0.25
    }
});            
        </script>
        <script type="application/flocking" id="noise_lf">
// LFNoise generating random audio noise.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.lfNoise",
        freq: 1000,
        mul: 0.25
    }
});
        </script>
        
        <script type="application/flocking" id="noise_impulse">
// The Impulse ugen's frequency controlled by a descending xLine.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.impulse",
        freq: {
            ugen: "flock.ugen.xLine",
            start: 880,
            end: 2,
            duration: 3.0
        },
        mul: 0.25
    }
});
        </script>
        
        <script type="application/flocking" id="noise_sin">
// LFNoise randomly changing the pitch of a sine 
// oscillator every quarter second.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        mul: 0.25,
        freq: {
            ugen: "flock.ugen.lfNoise",
            freq: 4,
            mul: 400,
            add: 450
        }
    }
});         
        </script>
        <script type="application/flocking" id="phase_mod">
// Create a new synth consisting of a sine wave, 
// modulating its phase with another sine wave.
var synth = flock.synth({
    synthDef: {
        id: "carrier",
        ugen: "flock.ugen.sinOsc",
        freq: 440,
        phase: {
            id: "mod",
            ugen: "flock.ugen.sinOsc",
            freq: 20.0,
            mul: flock.TWOPI
        },
        mul: 0.25
    }
});
        </script>
        <script type="application/flocking" id="impulse_phase">
// A stereo pair of Impulses, one being phase modulated with the mouse cursor.
var synth = flock.synth({
    synthDef: [
        {
            ugen: "flock.ugen.impulse",
            freq: 4,
            mul: 0.3,
            phase: 0
        },
        {
            ugen: "flock.ugen.impulse",
            freq: 4,
            mul: 0.3,
            phase: {
                ugen: "flock.ugen.mouse.cursor"
            }
        }
    ]
});
        </script>
        <script type="application/flocking" id="scope">
// Dynamic scope: create a synth with a scope ugen 
//at the end of the ugen graph.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.scope",
        source: {
            ugen: "flock.ugen.sinOsc",
            freq: 440,
            mul: 0.25
        },
        options: {
            canvas: "#gfx",
            styles: {
                strokeColor: "#777777",
                strokeWidth: 1
            }
        }
    }
});
        </script>
        <script type="application/flocking" id="simple_sin">
// Simple sine wave oscillator
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: 440,
        mul: 0.25
    }
});
        </script>
        <script type="application/flocking" id="simple_triangle">
// Triangle oscillator.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.triOsc",
        freq: 440,
        mul: 0.25
    }
});
        </script>
        <script type="application/flocking" id="simple_square">
// And a square wave oscillator.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.lfPulse",
        freq: 440,
        mul: 0.1
    }
});
        </script>
        <script type="application/flocking" id="simple_saw">
// And a saw.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.lfSaw",
        freq: 440,
        mul: 0.1
    }
});
        </script>
        <script type="application/flocking" id="stereo">
// Create a synth with two different channels. 
// The left and the right channels are both sine waves, 
// but slightly apart in frequency. 
// This creates a stereo beating effect.
var synth = flock.synth({
    synthDef: [
        {
            id: "leftSine",
            ugen: "flock.ugen.sinOsc",
            freq: 440,
            mul: 0.25
        },
        {
            id: "rightSine",
            ugen: "flock.ugen.sinOsc",
            freq: 444,
            mul: 0.25
        }
    ]
});
        </script>
        <script type="application/flocking" id="mouse_x">
// Tracks the mouse's horizonal movement across the window.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: {
            ugen: "flock.ugen.mouse.cursor",
            rate: "control",
            mul: 880,
            add: 110
        },
        mul: 0.25
    }
});
        </script>
        <script type="application/flocking" id="mouse_y">
// Tracks the mouse's vertical movement across the window.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: {
            ugen: "flock.ugen.mouse.cursor",
            rate: "control",
            mul: 880,
            add: 110,
            options: {
                axis: "y"
            }
        },
        mul: 0.25
    }
});
        </script>
        <script type="application/flocking" id="mouse_xy">
// Tracks the mouse's vertical and horizontal movement within the editor area only.
// Maps y position to amplitude and its x position to pitch.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: {
            ugen: "flock.ugen.mouse.cursor",
            rate: "control",
            mul: 880,
            add: 110,
            options: {
                axis: "width",
                interpolation: "exponential",
                target: "#editor"
            }
        },
        mul: {
            ugen: "flock.ugen.mouse.cursor",
            rate: "control",
            options: {
                axis: "height",
                target: "#editor"
            },
            mul: 0.5
        }
    }
});
        </script>
        <script type="application/flocking" id="mouse_click">
// Triggers a note whenever the mouse is clicked.
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sinOsc",
        freq: 440,
        mul: {
            ugen: "flock.ugen.env.simpleASR",
            attack: 0.25,
            sustain: 0.25,
            release: 0.5,
            gate: {
                ugen: "flock.ugen.mouse.click"
            }
        }
    }
});
        </script>
        
        <script type="application/flocking" id="delay">
// Use Dust to trigger the Delay unit generator as an envelope for a Decaying WhiteNoise source
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.delay",
        source: {
            ugen: "flock.ugen.decay",
            source: {
                ugen: "flock.ugen.dust",
                density: 1.0,
                mul: 0.5
            },
            time: 0.3,
            mul: {
                ugen: "flock.ugen.whiteNoise"
            }
        },
        maxTime: 1.0,
        time: 0.2,
        add: {
            ugen: "flock.ugen.decay",
            source: {
                ugen: "flock.ugen.dust",
                density: 1.0,
                mul: 0.5
            },
            time: 0.3,
            mul: {
                ugen: "flock.ugen.whiteNoise"
            }
        }
    }
});
        </script>
        
        <script type="application/flocking" id="latch">
/* 
  David Michael Cottle's first Latch example from http://www.mat.ucsb.edu/275/CottleSC3.pdf

 "The patterns that emerge are more varied than a single sequence, but more cohesive than an LFNoise control. 
  Try the example below and listen for the shape of the Saw wave in the frequencies. 
  In this patch I change the frequency of the wave being sampled. 
  I use a MouseX.kr to control the frequency of the sampled LFSaw. 
  It begins at 0.1, or once every ten seconds and then moves to 20. 
  When the mouse is at the left of the screen you should hear the shape of the wave in the resulting frequency control. 
  As you move to the right, you are essentially shortening the sampled wave in relation to the sample rate, 
  and the smooth ramp will begin to disappear, but there will always be a pattern" (Cottle 168)."
*/

var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.sin",
        mul: 0.3,
        freq: {
            ugen: "flock.ugen.latch",
            rate: "control",
            source: {
                ugen: "flock.ugen.lfSaw",
                freq: {
                    ugen: "flock.ugen.mouse.cursor",
                    rate: "control",
                    mul: 18.9,
                    add: 1.1
                },
                mul: 500,
                add: 600
            },
            trig: {
                ugen: "flock.ugen.impulse",
                rate: "control",
                freq: 10
            }
        }
    }
});
        </script>
        
        <script type="application/flocking" id="sum">
// A bank of oscillators added together.
var harmonics = [1, 3, 5, 7, 11, 13, 15, 17, 19, 21],
    ugenTypes = ["flock.ugen.sin", "flock.ugen.lfSaw", "flock.ugen.lfPulse", "flock.ugen.lfNoise"],
    fundamentalMultiplier = 440,
    maxFreq = flock.enviro.shared.audioSettings.rates.audio / 4; // Highest harmonic shouldn't be more than a quarter of the Nyquist frequency.

var makeHarmonic = function (ugenTypes, fundamental, harmonic, octave, maxAmp) {
    var freqScale = (harmonic * octave),
        ugen = flock.choose(ugenTypes);

    return {
        ugen: ugen,
        freq: fundamental * freqScale,
        mul: maxAmp / freqScale
    };
};

var makeHarmonics = function (fundamental) {
    var sources = [],
        freqs = [];

    $.each(harmonics, function (i, harmonic) {
        var freq = fundamental,
            octave = 1;

        while (freq <= maxFreq) {
            var ugenDef = makeHarmonic(ugenTypes, fundamental, harmonic, octave, 0.1);
            freq = ugenDef.freq;
            if (freq <= maxFreq && freqs.indexOf(freq) === -1) {
                freqs.push(freq);
                sources.push(ugenDef);
            }
            octave++;
        }
    });

    return sources;
};

var synth = flock.synth({
    synthDef: {
        id: "adder",
        ugen: "flock.ugen.sum",
        sources: makeHarmonics(fundamentalMultiplier)
    }
});

synth.enviro.asyncScheduler.repeat(2.0, function () {
    var fundamental = (fundamentalMultiplier * Math.random()) + 60;
    synth.input("adder.sources", makeHarmonics(fundamental));
});
        </script>
        
        <script type="application/flocking" id="multipleSynths">
/*
 * Multiple synths playing back simultaneously, playing shifting chords.
 */

// Creates an array of synths, each playing a degree of the chord specified in "intervals."
function makeIntervallicSynths (fundamental, intervals) {
    var ampScale = 0.4 / intervals.length;
    return $.map(intervals, function (interval, idx) {
        return flock.synth({
            synthDef: {
                id: "carrier",
                ugen: "flock.ugen.sin",
                freq: fundamental * interval,
                mul: ampScale
            }
        });
    });
}

var fundamental = 440,
    baseIntervals = [1/1, 5/4, 3/2],
    weightedIntervals = baseIntervals.concat([4/3, 6/5, 7/6, 2/1]).concat(baseIntervals),
    synths = makeIntervallicSynths(fundamental, baseIntervals),
    synth = synths[0],
    clock = flock.scheduler.async.tempo({
        bpm: 60
    });

// Every second, change one of the intervals by randomly choosing a synth
// and assigning it a new frequency from the list of intervals.
clock.repeat(1, function () {
    var intervalSynth = flock.choose(synths),
        newInterval = flock.choose(weightedIntervals);
    intervalSynth.input("carrier.freq", fundamental * newInterval);
});
        </script>
        
        <script type="application/flocking" id="granulator">
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.granulator",
        numGrains: {
            ugen: "flock.ugen.line",
            start: 1,
            end: 10,
            duration: 20
        },
        grainDur: 0.05,
        delayDur: 5,
        mul: 0.5,
        source: {
            ugen: "flock.ugen.filter.biquad.lp",
            freq: {
                ugen: "flock.ugen.sin",
                rate: "control",
                freq: {
                    ugen: "flock.ugen.xLine",
                    rate: "control",
                    start: 0.7,
                    end: 300,
                    duration: 20
                },
                phase: 0,
                mul: 3600,
                add: 4000
            },
            source: {
                ugen: "flock.ugen.lfSaw",
                freq: 200,
                mul: 0.25
            }
        }
    }
});
        </script>
        
        <script type="application/flocking" id="polyphonicSynth">
var fundamental = 440;

var polySynth = flock.synth.polyphonic({
    synthDef: {
        id: "carrier",
        ugen: "flock.ugen.sin",
        freq: fundamental,
        mul: {
            id: "env",
            ugen: "flock.ugen.env.simpleASR",
            attack: 0.25,
            sustain: 1.0,
            release: 0.5
        }
    }
});

var score = [
    {
        action: "noteOn",
        noteName: "root",
        change: {
            "carrier.freq": fundamental
        }
    },

    {
        action: "noteOn",
        noteName: "mediant",
        change: {
            "carrier.freq": fundamental * 5/4
        }
    },

    {
        action: "noteOn",
        noteName: "dominant",
        change: {
            "carrier.freq": fundamental * 3/2
        }
    },

    {
        action: "noteOff",
        noteName: "root"
    },

    {
        action: "noteOff",
        noteName: "mediant"
    },

    {
        action: "noteOff",
        noteName: "dominant"
    }
];

var clock = flock.scheduler.async();

var idx = 0;
clock.repeat(0.5, function () {
    if (idx >= score.length) {
        idx = 0;
    }
    var event = score[idx];
    polySynth[event.action](event.noteName, event.change);
    idx++;
});
        </script>
        
        <script type="application/flocking" id="declarativeScheduling">


var pleasures = [4.79,
6.98,
6.36,
5.32,
6.18,
6.81,
6.84,
6.44,
6.84,
5.69,
6.62,
7.08,
6.71,
4.03,
4.09,
5.85,
7.34,
8.1,
4.06,
5.74,
6.35,
6.65,
5.48,
6.74,
7.3,
5.2,
4.06,
7.61,
7.19,
5.76,
7.08,
6.68,
6.49,
4.41,
5.85,
6.85,
6.62,
6.45,
6.74,
6.99,
4.37,
5.17,
5.8,
8.24,
1.87,
7.08,
7.38,
3.96,
6.19,
6.05,
4.18,
6.5,
6.62,
1.99,
6.43,
7.59,
3.79,
5.47,
6.52,
5.1,
4.5,
6.66,
5.2,
6.09,
6.13,
5.61,
6.57,
5.35,
5.8,
6.72,
7.69,
7.08,
5.34,
5.61,
2.86,
4.57,
3.17,
5.53,
6.34,
5.96,
5.81,
5.9,
6.65,
5.93,
6.08,
7.36,
6.97,
4.26,
7.14,
3.88,
5.41,
5.08,
4.67,
5.52,
6.89,
7.31,
7.49,
7.34,
5.03,
7.23,
6.74,
4.84,
6.35,
6.23,
7,
7.49,
7.27,
6.65,
6.97];

// Shamelessly copied from http://www.ronelmm.com/tones/cscale.html
// A, G, F, E, D, C, B
var cMajor = [440, 392, 349.23, 329.63, 293.66, 261.63, 246.94];

var minPleasure = Math.min.apply(null, pleasures);
var maxPleasure = Math.max.apply(null, pleasures);

function convertToRange(value, srcRange, dstRange){
  // value is outside source range return
  if (value < srcRange[0] || value > srcRange[1]){
    return NaN; 
  }

  var srcMax = srcRange[1] - srcRange[0],
      dstMax = dstRange[1] - dstRange[0],
      adjValue = value - srcRange[0];

  return (adjValue * dstMax / srcMax) + dstRange[0];

}

function convertPleasureToRange(pleasure) {
    var index = Math.round(convertToRange(pleasure, [minPleasure, maxPleasure], [0,6])) % 6;
    return(cMajor[index]);
}

var pleasureTones = pleasures.map(convertPleasureToRange);
console.log(pleasureTones);

// Frequency Stair Stepping Demo
var clock = flock.enviro.shared.asyncScheduler,
    synth = flock.synth({
        nickName: "sin-synth",
        synthDef: {
            id: "carrier",
            ugen: "flock.ugen.sinOsc",
            freq: 110,
            mul: {
                ugen: "flock.ugen.line",
                start: 0,
                end: 0.25,
                duration: 1.0
            }
        }
    });

clock.schedule([
    {
        interval: "repeat",
        time: 1.0,
        change: {
            synth: "sin-synth",
            values: {
                "carrier.freq": {
                    synthDef: {
                        ugen: "flock.ugen.sequence",
                        buffer: pleasureTones
                    }
                }
            }
        }
    },

    {
        interval: "once",
        time: 100,
        change: {
            synth: "sin-synth",
            values: {
                "carrier.mul.start": 0.25,
                "carrier.mul.end": 0.0,
                "carrier.mul.duration": 1.0
            }
        }
    }
]);
        
        </script>
        
        
        <script type="application/flocking" id="lowpass">
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.filter.biquad.lp",
        freq: {
            ugen: "flock.ugen.sin",
            rate: "control",
            freq: {
                ugen: "flock.ugen.xLine",
                rate: "control",
                start: 0.7,
                end: 300,
                duration: 20
            },
            phase: 0,
            mul: 3600,
            add: 4000
        },
        source: {
            ugen: "flock.ugen.lfSaw",
            freq: 200,
            mul: 0.1
        }
    }
});
        </script>
        <script type="application/flocking" id="highpass">
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.filter.biquad.hp",
        freq: {
            ugen: "flock.ugen.sin",
            rate: "control",
            freq: {
                ugen: "flock.ugen.xLine",
                rate: "control",
                start: 0.7,
                end: 300,
                duration: 20
            },
            phase: 0,
            mul: 3600,
            add: 4000
        },
        source: {
            ugen: "flock.ugen.lfSaw",
            freq: 200,
            mul: 0.1
        }
    }
});
        </script>
        <script type="application/flocking" id="bandpass">
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.filter.biquad.bp",
        freq: {
            ugen: "flock.ugen.mouse.cursor",
            options: {
                interpolation: "exponential"
            },
            mul: 10000,
            add: 100,
            lag: 1
        },
        q: 3.0,
        source: {
            ugen: "flock.ugen.lfSaw",
            freq: 200,
            mul: 0.1
        }
    }
});
        </script>
        <script type="application/flocking" id="bandreject">
var synth = flock.synth({
    synthDef: {
        ugen: "flock.ugen.filter.biquad.br",
        freq: {
            ugen: "flock.ugen.mouse.cursor",
            options: {
                interpolation: "exponential"
            },
            mul: 10000,
            add: 100,
            lag: 1
        },
        q: 3.0,
        source: {
            ugen: "flock.ugen.lfSaw",
            freq: 200,
            mul: 0.1
        }
    }
});
        </script>
    </body>
</html>
